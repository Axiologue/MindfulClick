<section class="container-fluid">
  <div class="row">
    <h2 class="title-block title-black">How Ethical Are These Companies?</h2>
    <div class="col-xs-12 col-md-4 col-lg-4">
      <div bars-legend data="scores"></div>

      <div class="btn-personalized-wrapper">
        <a href="/login" class="btn btn-black btn-sm btn-personalized" ng-hide="authenticated">Login to see your own personalized score</a>
      </div>

      <div class="filter-box">
        <form>
          <div ng-show="authenticated">
            <h4>Chart Filtering</h4>
            <!-- Generic Filtering Checkbox -->
            <div class="checkbox">
              <label> 
                <input type="checkbox" ng-model="filterProps.showGeneric" ng-change="filterScores()">
                Show Generic Profile Scores
              </label>
            </div>
          </div>

          <!-- Score Sorting Select -->
          <h4>Chart Sorting</h4>
          <div class="radio">
            <label>
              <input type="radio" ng-change="sortScores()" ng-model="filterProps.ordering" value="alphabetic">
              Sort Alphabetically
            </label>
          </div>

          <div class="radio" ng-repeat="_user in scores[0].scores">
            <label>
              <input type="radio" ng-change="sortScores()" ng-model="filterProps.ordering" value="{{ _user.user }}">
              Sort by Scores ({{ _user.user.replace('_', ' ') }})
            </label>
          </div>
        </form>
      </div>


    </div>
    <div class="col-xs-12 col-md-8 col-lg-8">
      <horizontal-bars data="scores" bar-height="12" chart-gap="12" margin-top="20" link-text="/companies/detail/"></horizontal-bars>
      <div ng-show="loading" class="text-center">
        <i class="fa fa-spinner fa-pulse fa-4x"></i>
        <span class="sr-only">Loading...</span>
      </div>
    </div>

  </div>
</section>
